Version 4
SHEET 1 4188 2852
WIRE -992 32 -992 -16
WIRE -544 32 -544 -16
WIRE -992 160 -992 112
WIRE -544 160 -544 112
WIRE -880 416 -1072 416
WIRE -784 416 -880 416
WIRE -720 416 -784 416
WIRE -576 416 -656 416
WIRE -448 416 -576 416
WIRE -192 416 -448 416
WIRE -112 416 -192 416
WIRE -576 512 -576 480
WIRE -448 512 -448 480
WIRE -1072 528 -1072 480
WIRE -1072 528 -1104 528
WIRE -880 528 -880 480
WIRE -848 528 -880 528
WIRE -192 528 -192 496
WIRE -1072 560 -1072 528
WIRE -880 560 -880 528
WIRE -880 624 -1072 624
WIRE -848 624 -880 624
WIRE -416 1040 -416 1008
WIRE -416 1040 -480 1040
WIRE -640 1088 -640 1008
WIRE -416 1088 -416 1040
WIRE -480 1120 -480 1040
WIRE -768 1136 -768 1008
WIRE -1072 1152 -1136 1152
WIRE -912 1152 -912 1008
WIRE -912 1152 -992 1152
WIRE -800 1152 -912 1152
WIRE -720 1168 -736 1168
WIRE -640 1168 -720 1168
WIRE -560 1168 -640 1168
WIRE -416 1168 -464 1168
WIRE -288 1168 -416 1168
WIRE -176 1168 -208 1168
WIRE -48 1168 -176 1168
WIRE -800 1184 -832 1184
WIRE -768 1248 -768 1200
WIRE -176 1280 -176 1232
WIRE -928 1312 -960 1312
WIRE -832 1312 -832 1184
WIRE -832 1312 -848 1312
WIRE -800 1312 -832 1312
WIRE -720 1312 -720 1168
WIRE -832 1408 -832 1312
WIRE -512 1840 -672 1840
WIRE -448 1840 -512 1840
WIRE -48 1840 -368 1840
WIRE 128 1840 -48 1840
WIRE -512 1888 -512 1840
WIRE -1136 1920 -1136 1872
WIRE 32 1936 32 1904
WIRE -608 1952 -608 1936
WIRE -48 1952 -48 1840
WIRE 0 1952 -48 1952
WIRE -672 1968 -672 1840
WIRE -640 1968 -672 1968
WIRE 128 1968 128 1840
WIRE 128 1968 64 1968
WIRE 240 1968 128 1968
WIRE -512 1984 -512 1952
WIRE -512 1984 -576 1984
WIRE -464 1984 -512 1984
WIRE -384 1984 -400 1984
WIRE -272 1984 -304 1984
WIRE -128 1984 -272 1984
WIRE 0 1984 -128 1984
WIRE -976 2000 -1136 2000
WIRE -864 2000 -976 2000
WIRE -784 2000 -784 1840
WIRE -640 2000 -784 2000
WIRE -1136 2112 -1136 2080
WIRE -976 2112 -976 2064
WIRE -784 2112 -784 2064
WIRE -608 2112 -608 2016
WIRE -272 2112 -272 2048
WIRE 32 2112 32 2000
FLAG -992 -16 dynamo1
IOPIN -992 -16 Out
FLAG -992 160 dynamo2
IOPIN -992 160 Out
FLAG -848 624 0
FLAG -784 416 V_RECT_TP1-IN
IOPIN -784 416 Out
FLAG -192 528 0
FLAG -848 528 dynamo1
IOPIN -848 528 Out
FLAG -1104 528 dynamo2
IOPIN -1104 528 Out
FLAG -576 512 0
FLAG -112 416 V_REGULATED_TP2-IN
IOPIN -112 416 Out
FLAG -448 512 0
FLAG -544 160 0
FLAG -544 -16 Vcc
IOPIN -544 -16 Out
FLAG -768 1248 0
FLAG -960 1312 0
FLAG -1136 1152 dynamo1
IOPIN -1136 1152 Out
FLAG -912 1216 0
FLAG -640 1008 V_REGULATED_TP2-IN
IOPIN -640 1008 Out
FLAG -416 1008 Vcc
IOPIN -416 1008 Out
FLAG -48 1168 ZeroCross
IOPIN -48 1168 Out
FLAG -768 1008 V_REGULATED_TP2-IN
IOPIN -768 1008 Out
FLAG -912 1008 comp_neg
FLAG -832 1408 comp_pos
FLAG -608 2112 0
FLAG -272 2112 0
FLAG -608 1936 Vcc
IOPIN -608 1936 Out
FLAG -1136 1872 V_RECT_TP1-IN
IOPIN -1136 1872 Out
FLAG -1136 2112 0
FLAG -176 1280 0
FLAG 32 2112 0
FLAG 32 1904 Vcc
IOPIN 32 1904 Out
FLAG -976 2112 0
FLAG -784 2112 0
FLAG -784 1840 PeakDetectorIN
FLAG -128 1984 PeakDetectorOUT
FLAG 240 1968 VoltageFollowerOUT
IOPIN 240 1968 Out
SYMBOL voltage -992 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 18 100)
SYMBOL res -208 400 R0
SYMATTR InstName R1
SYMATTR Value 120
SYMBOL schottky -1056 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1056 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -864 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -864 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL polcap -592 416 R0
SYMATTR InstName C1
SYMATTR Value 4800u
SYMBOL schottky -720 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value RB500SM-30
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Comparators\\LT1716 -768 1168 R0
SYMATTR InstName U2
SYMBOL voltage -544 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL res -832 1296 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res -976 1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 30k
SYMBOL res -704 1296 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL diode -896 1216 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL nmos -560 1120 M90
SYMATTR InstName M1
SYMATTR Value IRFZ46Z
SYMBOL res -656 1072 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -432 1072 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL polcap -464 416 R0
SYMATTR InstName C2
SYMATTR Value 4800u
SYMBOL diode -464 2000 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL res -1152 1904 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL cap -288 1984 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL cap -192 1168 R0
SYMATTR InstName C4
SYMATTR Value 22n
SYMBOL res -192 1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res -1152 1984 R0
SYMATTR InstName R12
SYMATTR Value 20k
SYMBOL res -352 1824 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL Opamps\\LTC6244 -608 1984 R0
SYMATTR InstName U3
SYMBOL Opamps\\LTC6244 32 1968 R0
SYMATTR InstName U5
SYMBOL diode -528 1888 R0
WINDOW 3 38 26 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL res -288 1968 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 33r
SYMBOL schottky -960 2064 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -768 1984 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL cap -800 2000 R0
SYMATTR InstName C5
SYMATTR Value 120n
TEXT -1000 -272 Left 2 !.tran .1
TEXT -1168 -856 Left 2 ;stock dynamo: 3W, 6V: 500mA over a 12Ohm load\nwheel circumference: approx. 2m, 28 poles\n \nspeed [m/s] - speed [km/h] - freq. [Hz]\n2 - 3.6 - 56\n4 - 14.4 - 112\n6 - 21,6 - 168\n8 - 28,8 - 224\n10 - 36,0 - 280\n12 - 43.2 - 336\n14 - 50,4 - 392\n16 - 57,6 - 448\n20 - 72.7 - 560
TEXT -872 2176 Left 2 ;Low-Pass\nfcutoff=123.7Hz
